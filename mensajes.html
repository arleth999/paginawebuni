<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mensajes Chat</title>

  <!-- Bootstrap para estilos bonitos -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  >
</head>

<body class="bg-light">

<div class="container mt-4">
  <h2 class="mb-3"> Mensajes desde Sql Server</h2>

 

<button onclick="window.location.href='http://31.220.108.249/leer_mensajes.php'">
    Ver mensajes
</button>
  <ul id="lista" class="list-group"></ul>
</div>


<script>
async function cargarMensajes() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "<li class='list-group-item'>Cargando...</li>";

  try {
    const resp = await fetch("http://31.220.108.249/leer_mensajes.php");
    const data = await resp.json();

    lista.innerHTML = "";

    data.forEach(row => {
      const li = document.createElement("li");
      li.className = "list-group-item";

      li.innerHTML = `
        <strong>Sala:</strong> ${row.Cod_Sala} <br>
        <strong>Usuario:</strong> ${row.Login_Emisor} <br>
        <strong>Mensaje:</strong> ${row.Contenido}
      `;

      lista.appendChild(li);
    });

  } catch (err) {
    lista.innerHTML = 
      `<li class='list-group-item text-danger'>X Error: ${err}</li>`;
  }
}
</script>

</body>
</html>
